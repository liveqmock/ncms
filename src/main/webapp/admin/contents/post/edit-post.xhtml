<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="../template.xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core">
    <ui:define name="content">
        <p:panel header="Create new post">
            <h:form id="form" enctype="multipart/form-data">
                <p:messages globalOnly="true" closable="true" autoUpdate="true"/>
                <p:panelGrid columns="3">
                    <p:outputLabel for="thumbImage" value="#{msg['product.thumbImage']}"/>
                    <p:fileUpload id="thumbImage" mode="advanced"/>
                    <p:message for="thumbImage"/>
                    
                    <p:outputLabel for="code" value="#{msg['product.code']}"/>
                    <p:inputText id="code" value="#{postBean.current.code}"/>
                    <p:message for="code" style="display: inline-block;"/>


                    <p:outputLabel for="title" value="#{msg['product.title']}"/>
                    <p:inputText id="title" value="#{postBean.current.title}" size="40"/>
                    <p:message for="title"/>

                    <p:outputLabel for="category" value="#{msg['category']}"/>
                    <p:selectOneMenu id="category" value="#{postBean.current.category}" converter="postCatConverter">
                        <f:selectItems value="#{postCatBean.selectItems}"/>
                    </p:selectOneMenu>
                    <p:message for="category"/>

                    <p:outputLabel for="description" value="#{msg['description']}"/>
                    <p:inputTextarea id="description" cols="50" rows="3" value="#{postBean.current.description}" autoResize="false"/>
                    <p:message for="description"/>

                    <p:outputLabel for="specification" value="#{msg['post.content']}:"/>
                    <p:editor id="specification" value="#{postBean.current.specification}" width="630"/>
                    <p:message for="specification"/>

                </p:panelGrid>

                <p:separator/>

                <p:commandButton value="Save" action="#{postBean.persist()}" ajax="false"/>
                <p:commandButton value="Cancel" action="list?faces-redirect=true" immediate="true"/>
            </h:form>            
        </p:panel>
    </ui:define>
</ui:composition>